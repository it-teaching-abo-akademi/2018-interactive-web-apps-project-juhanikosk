(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,a){t.exports=a(26)},17:function(t,e,a){},24:function(t,e,a){},26:function(t,e,a){"use strict";a.r(e);var o=a(0),n=a.n(o),s=a(9),l=a.n(s),c=(a(17),a(19),a(20),a(11)),r=a(1),i=a(2),u=a(4),m=a(3),d=a(5),p=(a(24),function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(n)))).state={values:{}},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"setValue",value:function(t,e){var a=this.state.values;a[t]=e,this.setState({values:a})}},{key:"canSubmit",value:function(){var t=this;return!(Object.keys(this.state.values).length===this.props.inputs.length)||this.props.inputs.some(function(e){return e.validate(t.state.values[e.id])})}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"modal",tabIndex:"-1"},n.a.createElement("div",{className:"modal-dialog",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-header"},n.a.createElement("h5",{className:"modal-title"},this.props.title),n.a.createElement("button",{type:"button",className:"close",onClick:this.props.close},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"modal-body"},this.props.inputs.map(function(e){return n.a.createElement("input",{key:e.id,onChange:function(a){return t.setValue(e.id,a.target.value)},className:"form-control stock-input",placeholder:e.helpText})})),n.a.createElement("div",{className:"modal-footer"},n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){t.props.onCreate(t.state.values),t.props.close()},disabled:this.canSubmit()},this.props.submitName)))))}}]),e}(o.Component)),f=function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(n)))).state={selected:!1},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this,e=this.props;return n.a.createElement("div",{className:"row stock-row"},n.a.createElement("div",{className:"col"},n.a.createElement("span",null,e.stock.symbol)),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"".concat(e.unitValue?parseFloat(e.unitValue).toFixed(2)+" $":"No value fetched"))),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,e.stock.amount)),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"".concat((e.stock.amount*e.unitValue).toFixed(2)," $"))),n.a.createElement("div",{className:"checkbox col"},n.a.createElement("input",{type:"checkbox",onChange:function(a){return t.setState({selected:!t.state.selected},function(){return e.selectStock(e.stock,t.state.selected)})},value:this.state.selected})))}}]),e}(n.a.Component),h=function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(n)))).API_URL="https://www.alphavantage.co/query",a.API_KEY="RKZX2JYAYBAFV5S6",a.state={showStockCreationModal:!1,unitValues:{}},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.stocks.length&&this.props.stocks.forEach(function(e){t.fetchStockValue(e.symbol)})}},{key:"fetchStockValue",value:function(t){var e=this;fetch(this.API_URL+"?function=GLOBAL_QUOTE&symbol="+t+"&apikey="+this.API_KEY).then(function(a){a.json().then(function(a){if(a["Global Quote"]){var o=e.state.unitValues;o[t]=a["Global Quote"]["05. price"],e.setState({unitValues:o})}})})}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"portfolio col-sm-12 col-md-6 px-2 mt-2"},n.a.createElement("div",{className:"p-2 border border-dark"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"font-weight-bold mx-2 mb-2"},this.props.name))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("div",{className:"stocks mb-3 mx-1"},n.a.createElement("div",{className:"row stock-header"},n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"Symbol")),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"Unit value")),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"Quantity")),n.a.createElement("div",{className:"col"},n.a.createElement("span",null,"Total value")),n.a.createElement("div",{className:"checkbox col"})),this.props.stocks.map(function(e,a){return n.a.createElement(f,{key:a,stock:e,unitValue:t.state.unitValues[e.symbol],selectStock:function(e,a){return t.props.selectStock(e,t.props.id,a)}})})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{className:"btn btn-primary btn-sm mobile-full-width",onClick:function(){return t.setState({showStockCreationModal:!0})}},"Add stock"),n.a.createElement("button",{className:"btn btn-lightdanger btn-sm float-right mobile-full-width",onClick:this.props.deletePortfolio},"Delete a portfolio"),n.a.createElement("button",{className:"btn btn-lightdanger btn-sm delete-button mobile-full-width float-right mr-sm-2",onClick:this.props.deleteSelectedStocks},"Delete stocks")))),this.state.showStockCreationModal?n.a.createElement(p,{title:"Create a new stock",inputs:[{id:"symbol",helpText:"Write the symbol of the stock...",validate:function(t){return t.length<1}},{id:"amount",helpText:"Write the amount of shares...",validate:function(t){return isNaN(parseInt(t,10))||parseInt(t,10)<=0}}],close:function(){return t.setState({showStockCreationModal:!1})},onCreate:function(e){t.fetchStockValue(e.symbol),t.props.addStock(e)},submitName:"Add stock"}):null)}}]),e}(o.Component),v=function(t){function e(){var t,a;Object(r.a)(this,e);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(n)))).state={portfolios:[],showCreationModal:!1,selectedStocks:[]},a.selectStock=function(t,e,o){var n=a.state.selectedStocks;o?n.push({stock:t,portId:e}):n=n.filter(function(e){return e.stock.id!==t.id}),a.setState({selectedStocks:n})},a.deleteSelectedStocks=function(){var t=a.state.portfolios;a.state.selectedStocks.forEach(function(e){t=t.map(function(t){return t.id===e.portId&&(t.stocks=t.stocks.filter(function(t){return t.id!==e.stock.id})),t})}),a.setState({portfolios:t,selectedStocks:[]},localStorage.setItem("data",JSON.stringify(a.state)))},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("data");if(t){var e=JSON.parse(t);this.setState(e)}}},{key:"getNewPortolioId",value:function(){var t=0;return this.state.portfolios.forEach(function(e){e.id>=t&&(t=e.id+1)}),t}},{key:"getNewStockId",value:function(t){var e=0;return t.forEach(function(t){t.id>=e&&(e=t.id+1)}),e}},{key:"createNewPortfolio",value:function(t){var e=this,a={name:t.name,id:this.getNewPortolioId(),stocks:[]};this.setState({portfolios:Object(c.a)(this.state.portfolios).concat([a])},function(){return localStorage.setItem("data",JSON.stringify(e.state))})}},{key:"addStockToPortfolio",value:function(t,e){var a=this,o=this.state.portfolios.map(function(o){if(o.id===e){if(o.stocks.filter(function(e){return e.symbol===t.symbol}).length>=50)return alert("Can't add more than 50 unique stocks to a portfolio"),o;t.id=a.getNewStockId(o.stocks),o.stocks.push(t)}return o});this.setState({portfolios:o},function(){return localStorage.setItem("data",JSON.stringify(a.state))})}},{key:"render",value:function(){var t=this;return n.a.createElement("div",{className:"app-container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{className:"btn btn-primary mt-2 mx-2 mb-0",onClick:function(){return t.setState({showCreationModal:!0})},disabled:this.state.portfolios.length>=10},"Add new portfolio"))),n.a.createElement("div",{className:"row mx-0"},this.state.portfolios.length?this.state.portfolios.map(function(e,a){return n.a.createElement(h,{key:a,id:e.id,name:e.name,stocks:e.stocks,deletePortfolio:function(){return t.setState({portfolios:t.state.portfolios.filter(function(t){return t.id!==e.id})},function(){return localStorage.setItem("data",JSON.stringify(t.state))})},addStock:function(a){return t.addStockToPortfolio(a,e.id)},selectStock:t.selectStock,deleteSelectedStocks:t.deleteSelectedStocks})}):n.a.createElement("div",{className:"col-12 px-2"},n.a.createElement("p",{className:"mx-1 my-2 text-white"},"No portfolios made"))),this.state.showCreationModal?n.a.createElement(p,{title:"Create a new portfolio",inputs:[{id:"name",helpText:"Write the name of the portfolio...",validate:function(t){return t.length<4}}],close:function(){return t.setState({showCreationModal:!1})},onCreate:function(e){return t.createNewPortfolio(e)},submitName:"Create portfolio"}):null)}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.c8ef5ffb.chunk.js.map